# This file enables the cross-compile with clang-cl for ARM64 on Windows using Visual Studio 2022.
# Adapted for CI environment where MSVC environment is set up by the runner/action.

[project options]
enable-tflite-backbone=false
enable-nnstreamer-backbone=false
enable-tflite-interpreter=false
install-app=false

[built-in options]
werror=false
c_std='c17'
cpp_std='c++20'
platform='windows'
vsenv = true
default_library = 'static'
c_args = ['--target=aarch64-pc-windows-msvc','-Xclang', '-fopenmp']
cpp_args = ['--target=aarch64-pc-windows-msvc','-Xclang', '-fopenmp']
# Use relative path for libiomp, assume build dir is one level deep from root
c_link_args = ['/machine:ARM64','-LIBPATH:../libiomp_win/arm64','-llibomp']
cpp_link_args = ['/machine:ARM64','-LIBPATH:../libiomp_win/arm64','-llibomp']

[binaries]
c = 'clang-cl'
cpp = 'clang-cl'
ar = 'llvm-ar'
ld='clang-cl'
strip = 'llvm-objcopy'

[host_machine]
system='windows'
cpu_family = 'aarch64'
cpu = 'aarch64'
endian = 'little'
